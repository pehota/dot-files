# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod4

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
# font pango:monospace 10
font pango:"Hack Regular Nerd Font Complete" 10


# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
#font pango:DejaVu Sans Mono 8

# Before i3 v4.8, we used to recommend this one as the default:
# font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
# The font above is very space-efficient, that is, it looks good, sharp and
# clear in small sizes. However, its unicode glyph coverage is limited, the old
# X core fonts rendering does not support right-to-left and this being a bitmap
# font, it doesn’t scale on retina/hidpi displays.

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# Disable mouse window focus
focus_follows_mouse no

# Enable auto-focusing windows when activated
focus_on_window_activation focus

# Set default layout to tabbed
workspace_layout tabbed

# start a terminal
bindsym $mod+Return exec i3-sensible-terminal

# kill focused window
bindsym $mod+Shift+q kill

# start rofi launcher if present
bindsym $mod+space exec --no-startup-id "(rofi && rofi -combi-modi \\"window,drun\\" -show combi -modi combi -show-icons -drun-match-fields name) || dmenu-run"
bindsym $mod+shift+n exec "(rofi && sh ~/.config/rofi/menus/wifi.sh)"

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# split in horizontal orientation
bindsym $mod+Control+h split h

# split in vertical orientation
bindsym $mod+Control+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+Control+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
bindsym $mod+d focus child

# Make the currently focused window a scratchpad
bindsym $mod+BackSpace move scratchpad

# Show the first scratchpad window
bindsym $mod+Shift+BackSpace scratchpad show

# Workspace names

# to display names or symbols instead of plain workspace numbers you can use
# something like: set $ws1 1:mail
#                 set $ws2 2:
set $wsChat 3: Chat
set $wsSpotify 4: Spotify

set $ws1 1
set $ws2 2
set $ws3 3
set $ws4 4
set $ws5 5
set $ws6 6
set $ws7 7
set $ws8 8

# switch to workspace
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8

# cycle through the workspaces
bindsym $mod+Ctrl+j workspace prev
bindsym $mod+Ctrl+k workspace next

# Move focused container to workspace
bindsym $mod+Ctrl+1 move container to workspace number $ws1
bindsym $mod+Ctrl+2 move container to workspace number $ws2
bindsym $mod+Ctrl+3 move container to workspace number $ws3
bindsym $mod+Ctrl+4 move container to workspace number $ws4
bindsym $mod+Ctrl+5 move container to workspace number $ws5
bindsym $mod+Ctrl+6 move container to workspace number $ws6
bindsym $mod+Ctrl+7 move container to workspace number $ws7
bindsym $mod+Ctrl+8 move container to workspace number $ws8

# Move to workspace with focused container
bindsym $mod+Shift+1 move container to workspace $ws1; workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2; workspace $ws2
bindsym $mod+Shift+3 move container to workspace $wsChat; workspace $wsChat
bindsym $mod+Shift+4 move container to workspace $ws4; workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5; workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6; workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7; workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8; workspace $ws8

# quickly rename workspaces
bindsym $mod+Shift+w exec i3-input -F 'rename workspace to "%s"' -P 'New workspace name: '

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart

# Pulse Audio controls
bindsym XF86AudioRaiseVolume exec pactl set-sink-volume 0 +5% #increase sound volume
bindsym XF86AudioLowerVolume exec pactl set-sink-volume 0 -5% #decrease sound volume
bindsym XF86AudioMute exec pactl set-sink-mute 0 toggle # mute sound

# Screen brightness controls
# bindsym XF86MonBrightnessUp exec xbacklight -inc 20 # increase screen brightness
# bindsym XF86MonBrightnessDown exec xbacklight -dec 20 # decrease screen brightness
bindsym XF86MonBrightnessUp exec light -A 5 # increase screen brightness
bindsym XF86MonBrightnessDown exec light -U 5 # decrease screen brightness

# Media player controls
bindsym XF86AudioPlay exec playerctl play
bindsym XF86AudioPause exec playerctl pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous

# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym h resize shrink width 10 px or 10 ppt
        bindsym j resize grow height 10 px or 10 ppt
        bindsym k resize shrink height 10 px or 10 ppt
        bindsym l resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape
        bindsym Escape mode "default"
        bindsym Control+bracketleft mode "default"
}
#1d202100
bindsym $mod+r mode "resize"

# Windows colors        border  bground text    indicator child_border
client.focused          #7c6f64 #7c6f64 #ebdbb2 #ebdbb2   #a89984
client.unfocused        #3c3836 #3c3836 #928374 #928374   #928374

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
set $bar_font font pango:DejaVu Sans Mono, FontAwesome 10
set $bar_height 20
set $bar_background #282828
set $bar_statusline #a89984
set $bar_separator  #44475A

bar {
    $bar_font
    i3bar_command i3bar -t
    position top
    status_command i3status-rs ~/.config/i3/i3status-rs-top.toml
    height $bar_height
    # Disable mouse wheel in status bar 
    bindsym button4 nop
    bindsym button5 nop
    colors {
        background $bar_background
        statusline $bar_statusline
        separator  $bar_separator

        focused_workspace  #665c45 #665c45 #ebdbb2
        active_workspace   #7c6f64 #7c6f64 #ebdbb2
        inactive_workspace $bar_background $bar_background #a89984
        urgent_workspace   #cc241d #cc241d #a89984
        binding_mode       #d79921 #d79921 $bar_background
    }
}

set $locker i3lock -c 000000

set $mode_system System (l) lock, (e) logout, (s) suspend, (h) hibernate, (r) reboot, (Shift+s) shutdown
mode "$mode_system" {
    bindsym l exec --no-startup-id $locker && systemctl suspend, mode "default"
    bindsym e exec --no-startup-id (i3lock -c 000000) && i3-msg exit, mode "default"
    bindsym s exec --no-startup-id $locker && systemctl suspend, mode "default"
    bindsym h exec --no-startup-id $locker && systemctl hibernate, mode "default"
    bindsym r exec --no-startup-id systemctl reboot, mode "default"
    bindsym Shift+s exec --no-startup-id systemctl poweroff, mode "default"

    # Esc to go back to normal mode
    bindsym Escape mode "default"
    bindsym Control+bracketleft mode "default"
}
bindsym $mod+Shift+e mode "$mode_system"

set $mode_power DPMS on (+) / off (-)
mode "$mode_power" {
    bindsym plus exec --no-startup-id xset +dpms && xautolock -enable && dunstify 'Screen suspend is enabled.', mode "default"
    bindsym minus exec --no-startup-id xset -dpms && xautolock -disable && dunstify 'Screen suspend is disabled', mode "default"

    # Esc to go back to normal mode
    bindsym Escape mode "default"
    bindsym Control+bracketleft mode "default"
}
bindsym $mod+p mode "$mode_power"

# Print a section of the screen and save it to the clipboard
bindsym $mod+Control+Shift+4 --release exec "scrot -z -s /tmp/screenshot-$(date +%F_%T).png -e 'xclip -selection c -t image/png < $f'"
# Print a section of the screen and save it to a file on the Desktop
bindsym $mod+Control+4 --release exec "scrot -z -s ~/Desktop/screenshot-$(date +%F_%T).png"
# Print the current window and save it to the clipboard
bindsym Print --release exec "scrot -z /tmp/screenshot-$(date +%F_%T).png -e 'xclip -selection c -t image/png < $f'"
# Print the current window to a file
bindsym Shift+Print --release exec "scrot -z ~/Desktop/screenshot-$(date +%F_%T).png"

# Hide borders adjacent to horizontal edges
hide_edge_borders horizontal

# Auto switch back to previous app
workspace_auto_back_and_forth yes


# Startup apps
exec --no-startup-id /opt/enpass/Enpass; i3-msg 'kill'

exec_always --no-startup-id nm-applet

exec --no-startup-id picom -CGb --config ~/.config/picom/picom.conf

exec_always --no-startup-id setxkbmap -option grp:alt_shift_toggle -layout "us,bg(phonetic)"
# Enable auth agent
exec --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# Set the wallpaper
set $wallpaper /usr/share/backgrounds/bluemountain.jpg
exec_always --no-startup-id feh --bg-fill $wallpaper

# Start Redshift
exec --no-startup-id redshift -t 6500:3500

exec --no-startup-id xset dpms 60 300 600
exec --no-startup-id xautolock -locker "$locker" -time 1

# ----------- Generic windown configuration
# floating_maximum_size 900 x 600


# ----------- App windows config
# Put chats in their own window
for_window [class="Ferdi"] move to workspace $wsChat
for_window [class="Viber"] move to workspace $wsChat
for_window [class="Spotify"] move to workspace $wsSpotify

# Apps to run in a floating window
for_window [window_role="pop-up"]                       floating enable
for_window [window_role="bubble"]                       floating enable 
for_window [window_role="task_dialog"]                  floating enable
for_window [window_role="Preferences"]                  floating enable
for_window [window_type="dialog"]                       floating enable 
for_window [window_type="menu"]                         floating enable
for_window [class="Pamac-manager"]                      floating enable
for_window [class="Enpass"]                             floating enable


# -------------- i3-gaps
for_window [class="^.*"] border pixel 1


smart_gaps on
smart_borders on

gaps inner 6
gaps outer -2
